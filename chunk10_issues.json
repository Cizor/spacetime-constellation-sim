[
  {
    "url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/issues/170",
    "repository_url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim",
    "labels_url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/issues/170/labels{/name}",
    "comments_url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/issues/170/comments",
    "events_url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/issues/170/events",
    "html_url": "https://github.com/Cizor/spacetime-constellation-sim/issues/170",
    "id": 3714871896,
    "node_id": "I_kwDOQfMfks7dbHJY",
    "number": 170,
    "title": "[Scope 4][Chunk 10] Epic – Unit tests for agents, scheduler, and KB actions",
    "user": {
      "login": "Cizor",
      "id": 11782718,
      "node_id": "MDQ6VXNlcjExNzgyNzE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11782718?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Cizor",
      "html_url": "https://github.com/Cizor",
      "followers_url": "https://api.github.com/users/Cizor/followers",
      "following_url": "https://api.github.com/users/Cizor/following{/other_user}",
      "gists_url": "https://api.github.com/users/Cizor/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Cizor/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Cizor/subscriptions",
      "organizations_url": "https://api.github.com/users/Cizor/orgs",
      "repos_url": "https://api.github.com/users/Cizor/repos",
      "events_url": "https://api.github.com/users/Cizor/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Cizor/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "labels": [
      {
        "id": 9737891558,
        "node_id": "LA_kwDOQfMfks8AAAACRGxu5g",
        "url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/labels/type:test",
        "name": "type:test",
        "color": "3c874f",
        "default": false,
        "description": ""
      },
      {
        "id": 9738572054,
        "node_id": "LA_kwDOQfMfks8AAAACRHbRFg",
        "url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/labels/type:tracking",
        "name": "type:tracking",
        "color": "4eaa16",
        "default": false,
        "description": ""
      },
      {
        "id": 9782134341,
        "node_id": "LA_kwDOQfMfks8AAAACRw-GRQ",
        "url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/labels/scope:4-sbi",
        "name": "scope:4-sbi",
        "color": "5a2e28",
        "default": false,
        "description": ""
      },
      {
        "id": 9782141359,
        "node_id": "LA_kwDOQfMfks8AAAACRw-hrw",
        "url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/labels/chunk:10-sbi-unit-tests",
        "name": "chunk:10-sbi-unit-tests",
        "color": "95506b",
        "default": false,
        "description": ""
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": {
      "login": "Cizor",
      "id": 11782718,
      "node_id": "MDQ6VXNlcjExNzgyNzE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11782718?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Cizor",
      "html_url": "https://github.com/Cizor",
      "followers_url": "https://api.github.com/users/Cizor/followers",
      "following_url": "https://api.github.com/users/Cizor/following{/other_user}",
      "gists_url": "https://api.github.com/users/Cizor/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Cizor/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Cizor/subscriptions",
      "organizations_url": "https://api.github.com/users/Cizor/orgs",
      "repos_url": "https://api.github.com/users/Cizor/repos",
      "events_url": "https://api.github.com/users/Cizor/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Cizor/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "assignees": [
      {
        "login": "Cizor",
        "id": 11782718,
        "node_id": "MDQ6VXNlcjExNzgyNzE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/11782718?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Cizor",
        "html_url": "https://github.com/Cizor",
        "followers_url": "https://api.github.com/users/Cizor/followers",
        "following_url": "https://api.github.com/users/Cizor/following{/other_user}",
        "gists_url": "https://api.github.com/users/Cizor/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/Cizor/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Cizor/subscriptions",
        "organizations_url": "https://api.github.com/users/Cizor/orgs",
        "repos_url": "https://api.github.com/users/Cizor/repos",
        "events_url": "https://api.github.com/users/Cizor/events{/privacy}",
        "received_events_url": "https://api.github.com/users/Cizor/received_events",
        "type": "User",
        "user_view_type": "public",
        "site_admin": false
      }
    ],
    "milestone": null,
    "comments": 0,
    "created_at": "2025-12-10T11:52:28Z",
    "updated_at": "2025-12-10T11:52:28Z",
    "closed_at": null,
    "author_association": "OWNER",
    "active_lock_reason": null,
    "sub_issues_summary": {
      "total": 5,
      "completed": 0,
      "percent_completed": 0
    },
    "issue_dependencies_summary": {
      "blocked_by": 0,
      "total_blocked_by": 0,
      "blocking": 0,
      "total_blocking": 0
    },
    "body": "## Background\n\nBy the end of **Chunk 9**, the core SBI machinery should exist and be wired into the scenario lifecycle:\n\n- CDPI server (`ControlDataPlaneInterface`) on the controller side.\n- Simulated `Agent` per node with:\n  - Local schedule queue.\n  - Execution of scheduled actions (beams/routes) via `ScenarioState`.\n  - Telemetry loop emitting `ExportMetrics`.\n- Controller-side scheduler that:\n  - Uses connectivity / ScenarioState.\n  - Issues `CreateEntry`, `DeleteEntry`, `Finalize` actions.\n- Wiring into the simulator run:\n  - Real `EventScheduler` driven by sim-time.\n  - Agents + scheduler started with the scenario.\n\nWhat’s missing is a **focused, deterministic unit test layer** for these SBI components:\n\n- Agent schedule execution (Create/Delete/Finalize semantics).\n- Scheduler decisions given a simple in-memory `ScenarioState`.\n- Telemetry metrics evolution over time.\n\nThese tests should avoid real gRPC/network where possible, preferring fakes and in-process doubles, and must form the core safety net before Chunk 11’s in-process gRPC tests.\n\n## Goal\n\nProvide a **targeted suite of unit tests** for Scope 4 SBI components that:\n\n- Validates agent behaviour:\n  - Schedule handling for `CreateEntry`, `DeleteEntry`, `FinalizeRequest`.\n  - Correct calls into `ScenarioState` helpers (beams/routes).\n  - Proper `Response` messages back to the controller side (via a fake stream).\n- Validates scheduler behaviour:\n  - Given a tiny in-memory topology and link intervals, emits the expected scheduled actions.\n  - Produces correct `UpdateBeam` / `DeleteBeam` and `SetRoute` / `DeleteRoute` actions.\n- Validates telemetry behaviour:\n  - Given active links and bandwidth, bytes counters increase monotonically across ticks.\n  - Interfaces marked down do not accumulate bytes.\n\nAll tests should be **fast, deterministic** and runnable with `go test ./...` as part of the normal CI pipeline.\n\n## Where to look\n\nAgent and SBI code:\n\n- `internal/sbi/agent` (or equivalent):\n  - `Agent` struct and its methods:\n    - Schedule handling from CDPI messages.\n    - `execute(...)` / beam + route application.\n    - Telemetry loop helpers (if not already separated).\n- `internal/sbi/controller`:\n  - `CDPIServer` and any helper types for sending/receiving messages.\n  - `Scheduler` implementation:\n    - Logic that inspects `ScenarioState` and emits `ScheduledAction`s.\n\nState / KB helpers:\n\n- `sim/state` or `internal/simstate`:\n  - `ScenarioState`:\n    - Beam helpers (e.g. `ApplyBeamUpdate`, `ApplyBeamDelete`).\n    - Route helpers (e.g. `InstallRoute`, `RemoveRoute`).\n  - Any test-friendly constructors for in-memory states.\n\nExisting fakes / test infra:\n\n- Any existing `FakeEventScheduler` or similar from earlier chunks.\n- Any helper types for fake Telemetry, fake CDPI streams, or in-memory KBs.\n\nSearch terms:\n\n- `Agent struct`\n- `ScheduledAction`\n- `CDPIServer`\n- `Scheduler struct`\n- `ScenarioState`\n- `TelemetryState`\n- `FakeEventScheduler`\n- `*_test.go` under `internal/sbi` or `sim/state`\n\n## Tasks\n\n### 10.1 – Agent schedule execution tests\n\n- Add tests under something like `internal/sbi/agent/agent_test.go`.\n\n- Introduce or reuse a **FakeEventScheduler**:\n\n  - Manually-controlled `Now()`.\n  - `Schedule(at, f)` records events and allows tests to trigger them deterministically.\n\n- Create a **FakeScenarioState** for unit tests:\n\n  - Implements just enough of the `ScenarioState` interface used by the agent:\n    - Methods such as `ApplyBeamUpdate`, `ApplyBeamDelete`, `InstallRoute`, `RemoveRoute`.\n  - Records calls (nodeID, interfaceID, routes, etc.) into slices so assertions can be made.\n\n- Create a **FakeCDPIStream / agent response sink**:\n\n  - Instead of real gRPC streams, use a struct that:\n    - Exposes a `SendResponse`/`Write`-like method that the agent uses.\n    - Records all responses (request_id, status, type).\n\n- Test cases:\n\n  1. **CreateEntry → scheduled execution**\n\n     - Arrange:\n       - Fake scheduler with `Now()` at `T0`.\n       - Agent wired to:\n         - Fake scheduler.\n         - Fake scenario state.\n         - Fake response sink.\n       - A `ScheduledAction` for `UpdateBeam` at time `T1 = T0 + Δ`.\n     - Act:\n       - Simulate agent receiving a `CreateEntryRequest` mapped to that action.\n       - Advance fake scheduler to `T1` and invoke scheduled callbacks.\n     - Assert:\n       - Fake scenario state saw exactly one `ApplyBeamUpdate` call with expected parameters.\n       - Fake responses contain exactly one OK response for the associated `request_id`.\n\n  2. **DeleteEntry cancels scheduled execution**\n\n     - Arrange:\n       - Same as above, but:\n         - After scheduling the action, simulate a `DeleteEntryRequest` for the same `EntryID`.\n     - Act:\n       - Advance scheduler to `T1`.\n     - Assert:\n       - No `ApplyBeamUpdate` / `InstallRoute` calls were made.\n       - Optionally verify that no response is sent for the cancelled entry.\n\n  3. **FinalizeRequest drops past entries**\n\n     - Arrange:\n       - Two scheduled actions:\n         - `A1` at `T1`.\n         - `A2` at `T2` where `T2 > T_cutoff > T1`.\n     - Act:\n       - Simulate `FinalizeRequest(cutoff = T_cutoff)` on the agent.\n       - Advance scheduler to `T2`.\n     - Assert:\n       - `A1` is never executed.\n       - `A2` is executed once.\n       - Responses reflect only the surviving action.\n\n  4. **Route actions call ScenarioState helpers**\n\n     - Arrange:\n       - A `ScheduledAction` of type `ScheduledSetRoute` at `T1`.\n     - Act:\n       - Schedule + execute via fake scheduler.\n     - Assert:\n       - `FakeScenarioState.InstallRoute` called with correct node and route parameters.\n       - A later `ScheduledDeleteRoute` calls `RemoveRoute`.\n\n  5. **Reset handling (if implemented on Agent)**\n\n     - Arrange:\n       - Agent with several pending actions.\n     - Act:\n       - Simulate a Reset event (local or via CDPI semantics).\n     - Assert:\n       - Pending schedule cleared.\n       - New token (if tracked by agent) differs from old one.\n       - Subsequent messages with old token are ignored/logged (as per implementation).\n\n### 10.2 – Scheduler logic tests\n\n- Add tests under `internal/sbi/controller/scheduler_test.go`.\n\n- Use a **pure in-memory `ScenarioState`**:\n\n  - Create a minimal topology:\n    - A couple of nodes (e.g. `A`, `B`).\n    - Interfaces and one potential link between them.\n  - Set up link “in view” interval `[T_on, T_off]` in a deterministic way.\n\n- Use a **FakeCDPI server handle**:\n\n  - Implement the CDPI entrypoint the scheduler calls, e.g.:\n    - `SendCreateEntry(agentID string, action *ScheduledAction) error`\n  - Record all sent actions into slices for later assertions.\n\n- Test cases:\n\n  1. **Link-driven beam scheduling**\n\n     - Arrange:\n       - Single link with known `[T_on, T_off]`.\n       - Scheduler configured with this `ScenarioState` and fake CDPI.\n     - Act:\n       - Run scheduler’s “compute schedule” entrypoint once (or for the desired horizon).\n     - Assert:\n       - Fake CDPI recorded:\n         - One `ScheduledUpdateBeam` action at or near `T_on` (allowing for any lead time).\n         - One `ScheduledDeleteBeam` action at `T_off`.\n       - Actions are targeted to the expected agent/node.\n\n  2. **Static routes for single-hop link**\n\n     - Arrange:\n       - Same topology as above.\n     - Act:\n       - Run scheduler.\n     - Assert:\n       - For each node endpoint, one `SetRoute` is scheduled at link-on time.\n       - Corresponding `DeleteRoute` is scheduled at link-off time.\n\n  3. **ServiceRequest-aware path scheduling (minimal)**\n\n     - Arrange:\n       - Scenario with:\n         - Nodes `S` (source), `D` (destination).\n         - Potential path between them over one or more links.\n       - A single `ServiceRequest` active between `S` and `D`.\n     - Act:\n       - Run scheduler’s ServiceRequest-aware routine.\n     - Assert:\n       - At least one path is chosen (e.g. via BFS).\n       - Scheduler issues:\n         - `UpdateBeam` actions along first-hop links.\n         - `SetRoute` entries along the path.\n       - If no path exists, verify no actions are scheduled.\n\n### 10.3 – Telemetry tests\n\n- Add telemetry-focused tests under `internal/sbi/telemetry_test.go` (or similar).\n\n- Use a **FakeEventScheduler** and a **FakeScenarioState** that:\n\n  - Exposes a node with one or more interfaces.\n  - Allows toggling:\n    - Interface/link `Up`/`Down` state.\n    - Bandwidth (bps) value.\n\n- Use a **FakeTelemetryServiceClient**:\n\n  - Implements `TelemetryServiceClient` and records every `ExportMetricsRequest`:\n    - Capture `NodeId`, `InterfaceId`, `Up`, `BytesTx`, etc.\n\n- Test cases:\n\n  1. **Bytes counters increase when interface is up**\n\n     - Arrange:\n       - Agent with:\n         - `TelemetryInterval = 1s`.\n         - Fake scheduler starting at `T0`.\n         - Fake state: one interface with `up = true`, `bandwidthBps = 8000` (1 kB/s).\n     - Act:\n       - Start telemetry loop once.\n       - Trigger two telemetry ticks at `T0 + 1s` and `T0 + 2s`.\n     - Assert:\n       - Two `ExportMetrics` calls recorded.\n       - For the interface:\n         - `BytesTx` on second call ≈ `2 * 1000` bytes (within integer rounding).\n         - `Up` flag remains `true`.\n\n  2. **No byte accumulation when interface is down**\n\n     - Arrange:\n       - Same as above, but `up = false`.\n     - Act:\n       - Trigger several telemetry ticks.\n     - Assert:\n       - `BytesTx` remains at `0` for all calls.\n       - `Up` flag is `false`.\n\n  3. **No metrics when there are no interfaces**\n\n     - Arrange:\n       - Agent NodeID with no interfaces in `ScenarioState`.\n     - Act:\n       - Trigger telemetry tick.\n     - Assert:\n       - Either:\n         - No `ExportMetrics` call is sent, or\n         - The request contains an empty `InterfaceMetrics` list (depending on design).\n       - No panics or unexpected errors.\n\n  4. **Telemetry disabled behaviour**\n\n     - Arrange:\n       - Agent with `TelemetryClient = nil` or `TelemetryInterval <= 0`.\n     - Act:\n       - Call `startTelemetryLoop`.\n     - Assert:\n       - Fake scheduler never schedules telemetry events.\n       - No calls to `ExportMetrics`.\n\n## Acceptance criteria\n\n- **Agent unit tests:**\n\n  - Cover:\n    - Execution of scheduled `UpdateBeam` / `DeleteBeam` / `SetRoute` / `DeleteRoute` actions via `ScenarioState`.\n    - `DeleteEntry` prevents execution of cancelled actions.\n    - `FinalizeRequest` drops actions before cutoff but preserves later ones.\n    - (If implemented) Reset semantics clear pending entries and refresh tokens.\n  - Use fakes for:\n    - Event scheduler.\n    - ScenarioState.\n    - Response sink (CDPI stream).\n\n- **Scheduler unit tests:**\n\n  - Given a simple in-memory topology and link intervals:\n    - Scheduler issues the expected `ScheduledAction`s for beams and routes.\n    - (Optional) ServiceRequest-aware scheduling creates a basic path with corresponding actions.\n  - No real gRPC calls; all interactions go through fake CDPI methods.\n\n- **Telemetry unit tests:**\n\n  - Demonstrate:\n    - Monotonic increase of `BytesTx` when link is up and bandwidth > 0.\n    - No increase when interface is down.\n    - Safe behaviour for:\n      - No interfaces.\n      - Disabled telemetry configuration.\n  - Use fake scheduler, FakeScenarioState, and FakeTelemetryServiceClient.\n\n- **Test performance and reliability:**\n\n  - All new tests:\n    - Run quickly (no sleep-based timing, only fake clocks).\n    - Are deterministic (no reliance on real time or external services).\n  - `go test ./...` passes across the repository with new tests enabled.\n\n- **Documentation / discoverability:**\n\n  - Test files are clearly named and located:\n    - `internal/sbi/agent/agent_test.go` (and/or `agent_schedule_test.go`).\n    - `internal/sbi/controller/scheduler_test.go`.\n    - `internal/sbi/telemetry_test.go` (or equivalent).\n  - High-level comments at the top of each test file explain:\n    - What component is under test.\n    - Which parts of Scope 4 they correspond to (Chunk 10).\n",
    "closed_by": null,
    "reactions": {
      "url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/issues/170/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/issues/170/timeline",
    "performed_via_github_app": null,
    "state_reason": null
  },
  {
    "url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/issues/171",
    "repository_url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim",
    "labels_url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/issues/171/labels{/name}",
    "comments_url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/issues/171/comments",
    "events_url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/issues/171/events",
    "html_url": "https://github.com/Cizor/spacetime-constellation-sim/issues/171",
    "id": 3715053712,
    "node_id": "I_kwDOQfMfks7dbziQ",
    "number": 171,
    "title": "[Scope 4][Chunk 10] Add unit tests for scheduler logic (beam intervals + route intervals)",
    "user": {
      "login": "Cizor",
      "id": 11782718,
      "node_id": "MDQ6VXNlcjExNzgyNzE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11782718?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Cizor",
      "html_url": "https://github.com/Cizor",
      "followers_url": "https://api.github.com/users/Cizor/followers",
      "following_url": "https://api.github.com/users/Cizor/following{/other_user}",
      "gists_url": "https://api.github.com/users/Cizor/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Cizor/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Cizor/subscriptions",
      "organizations_url": "https://api.github.com/users/Cizor/orgs",
      "repos_url": "https://api.github.com/users/Cizor/repos",
      "events_url": "https://api.github.com/users/Cizor/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Cizor/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "labels": [
      {
        "id": 9737891558,
        "node_id": "LA_kwDOQfMfks8AAAACRGxu5g",
        "url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/labels/type:test",
        "name": "type:test",
        "color": "3c874f",
        "default": false,
        "description": ""
      },
      {
        "id": 9782134341,
        "node_id": "LA_kwDOQfMfks8AAAACRw-GRQ",
        "url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/labels/scope:4-sbi",
        "name": "scope:4-sbi",
        "color": "5a2e28",
        "default": false,
        "description": ""
      },
      {
        "id": 9782141359,
        "node_id": "LA_kwDOQfMfks8AAAACRw-hrw",
        "url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/labels/chunk:10-sbi-unit-tests",
        "name": "chunk:10-sbi-unit-tests",
        "color": "95506b",
        "default": false,
        "description": ""
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": {
      "login": "Cizor",
      "id": 11782718,
      "node_id": "MDQ6VXNlcjExNzgyNzE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11782718?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Cizor",
      "html_url": "https://github.com/Cizor",
      "followers_url": "https://api.github.com/users/Cizor/followers",
      "following_url": "https://api.github.com/users/Cizor/following{/other_user}",
      "gists_url": "https://api.github.com/users/Cizor/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Cizor/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Cizor/subscriptions",
      "organizations_url": "https://api.github.com/users/Cizor/orgs",
      "repos_url": "https://api.github.com/users/Cizor/repos",
      "events_url": "https://api.github.com/users/Cizor/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Cizor/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "assignees": [
      {
        "login": "Cizor",
        "id": 11782718,
        "node_id": "MDQ6VXNlcjExNzgyNzE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/11782718?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Cizor",
        "html_url": "https://github.com/Cizor",
        "followers_url": "https://api.github.com/users/Cizor/followers",
        "following_url": "https://api.github.com/users/Cizor/following{/other_user}",
        "gists_url": "https://api.github.com/users/Cizor/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/Cizor/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Cizor/subscriptions",
        "organizations_url": "https://api.github.com/users/Cizor/orgs",
        "repos_url": "https://api.github.com/users/Cizor/repos",
        "events_url": "https://api.github.com/users/Cizor/events{/privacy}",
        "received_events_url": "https://api.github.com/users/Cizor/received_events",
        "type": "User",
        "user_view_type": "public",
        "site_admin": false
      }
    ],
    "milestone": {
      "url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/milestones/4",
      "html_url": "https://github.com/Cizor/spacetime-constellation-sim/milestone/4",
      "labels_url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/milestones/4/labels",
      "id": 14244293,
      "node_id": "MI_kwDOQfMfks4A2VnF",
      "number": 4,
      "title": "Scope 4 – Planning & Scheduling",
      "description": "",
      "creator": {
        "login": "Cizor",
        "id": 11782718,
        "node_id": "MDQ6VXNlcjExNzgyNzE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/11782718?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Cizor",
        "html_url": "https://github.com/Cizor",
        "followers_url": "https://api.github.com/users/Cizor/followers",
        "following_url": "https://api.github.com/users/Cizor/following{/other_user}",
        "gists_url": "https://api.github.com/users/Cizor/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/Cizor/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Cizor/subscriptions",
        "organizations_url": "https://api.github.com/users/Cizor/orgs",
        "repos_url": "https://api.github.com/users/Cizor/repos",
        "events_url": "https://api.github.com/users/Cizor/events{/privacy}",
        "received_events_url": "https://api.github.com/users/Cizor/received_events",
        "type": "User",
        "user_view_type": "public",
        "site_admin": false
      },
      "open_issues": 73,
      "closed_issues": 0,
      "state": "open",
      "created_at": "2025-11-29T09:54:27Z",
      "updated_at": "2025-12-10T17:09:37Z",
      "due_on": null,
      "closed_at": null
    },
    "comments": 0,
    "created_at": "2025-12-10T12:43:53Z",
    "updated_at": "2025-12-10T12:43:53Z",
    "closed_at": null,
    "author_association": "OWNER",
    "active_lock_reason": null,
    "sub_issues_summary": {
      "total": 0,
      "completed": 0,
      "percent_completed": 0
    },
    "parent_issue_url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/issues/170",
    "issue_dependencies_summary": {
      "blocked_by": 0,
      "total_blocked_by": 0,
      "blocking": 0,
      "total_blocking": 0
    },
    "body": "## Background\n\nChunk 8 introduced the **controller-side Scheduler**, which generates `ScheduledAction` entries for:\n\n- **UpdateBeam / DeleteBeam** based on link in-view intervals.\n- **SetRoute / DeleteRoute** based on the same intervals.\n- Optional **ServiceRequest-aware scheduling** (first-hop activation), though this test focuses only on link-driven scheduling.\n\nChunk 10 requires **unit tests** ensuring that scheduler logic is correct and deterministic, independent of gRPC or agents.\n\nThis issue covers *only one slice* of Chunk 10:  \n➡️ **Testing the scheduling of beam and route actions based on in-view intervals.**\n\nNo CDPI server, no agent — just the Scheduler + ScenarioState + a fake CDPI handle.\n\n---\n\n## Goal\n\nCreate a focused test suite validating that the Scheduler:\n\n1. Computes in-view intervals correctly (delegated to ScenarioState).  \n2. Emits **one UpdateBeam** at `T_on` and **one DeleteBeam** at `T_off`.  \n3. Emits **SetRoute** and **DeleteRoute** at the same times.  \n4. Sends scheduled actions through a fake CDPI interface without real gRPC.\n5. Does not send duplicate actions or malformed intervals.\n\n---\n\n## Where to look\n\n- `internal/sbi/controller/scheduler.go`\n- `sim/state` or wherever potential links + in-view intervals are computed.\n- `internal/sbi/controller/cdpi_fake_test.go` (to create a fake CDPI sender).\n\n---\n\n## Tasks\n\n### 1. Create test file\nCreate:\n\n```\ninternal/sbi/controller/scheduler_link_intervals_test.go\n```\n\n### 2. Build a **FakeScenarioState**\nMust return:\n\n- A list of nodes + interfaces.\n- One potential link defined as **in view** from `T_on` to `T_off`.\n\nExample:\n\n```go\ntype FakeState struct {\n    TOn  time.Time\n    TOff time.Time\n}\n\nfunc (s *FakeState) GetPotentialLinks() []PotentialLink {\n    return []PotentialLink{\n        { LinkID: \"L1\", NodeA: \"A\", IfA: \"A-1\", NodeB: \"B\", IfB: \"B-1\", InView: []Interval{{Start: s.TOn, End: s.TOff}}},\n    }\n}\n```\n\n### 3. Build a **Fake CDPI sender**\nRecords CreateEntry actions:\n\n```go\ntype FakeCDPI struct {\n    Sent []*ScheduledAction\n}\n\nfunc (f *FakeCDPI) SendCreateEntry(agentID string, a *ScheduledAction) error {\n    f.Sent = append(f.Sent, a)\n    return nil\n}\n```\n\n### 4. Instantiate Scheduler in test\nUse a fake EventScheduler (already built in Chunk 3 tests).\n\n### 5. Test expectations\nRun scheduling once:\n\n```go\nsch.RunOnce()\n```\n\nThen assert:\n\n- Exactly **4 scheduled actions**:\n  - UpdateBeam at T_on\n  - DeleteBeam at T_off\n  - SetRoute at T_on\n  - DeleteRoute at T_off\n- All actions have correct fields (`EntryID`, node IDs, interface IDs).\n- Times match exactly.\n\n### 6. Negative tests\n\n#### a. Link interval zero-length → scheduler must skip it  \nStart == End.\n\n#### b. Overlapping intervals → scheduler must not duplicate events  \nIf two intervals overlap, the scheduler should still send exactly one update and one delete.\n\n#### c. Missing endpoints → scheduler must skip link  \nTest robustness for malformed state.\n\n---\n\n## Acceptance criteria\n\n- A complete unit test suite exists under  \n  `internal/sbi/controller/scheduler_link_intervals_test.go`\n\n- Tests validate:\n  - UpdateBeam → at T_on  \n  - DeleteBeam → at T_off  \n  - SetRoute → at T_on  \n  - DeleteRoute → at T_off  \n\n- Tests use:\n  - FakeScenarioState\n  - FakeEventScheduler\n  - FakeCDPI (no gRPC)\n\n- Tests cover edge cases:\n  - zero-length interval  \n  - overlapping interval  \n  - malformed link  \n\n- `go test ./...` passes.\n\n- No scheduler or CDPI code modifications required (tests only verify existing behavior).\n\n",
    "closed_by": null,
    "reactions": {
      "url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/issues/171/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/issues/171/timeline",
    "performed_via_github_app": null,
    "state_reason": null
  },
  {
    "url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/issues/172",
    "repository_url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim",
    "labels_url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/issues/172/labels{/name}",
    "comments_url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/issues/172/comments",
    "events_url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/issues/172/events",
    "html_url": "https://github.com/Cizor/spacetime-constellation-sim/issues/172",
    "id": 3715063658,
    "node_id": "I_kwDOQfMfks7db19q",
    "number": 172,
    "title": "[Scope 4][Chunk 10] Add scheduler logic unit tests for link-driven beam & route scheduling",
    "user": {
      "login": "Cizor",
      "id": 11782718,
      "node_id": "MDQ6VXNlcjExNzgyNzE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11782718?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Cizor",
      "html_url": "https://github.com/Cizor",
      "followers_url": "https://api.github.com/users/Cizor/followers",
      "following_url": "https://api.github.com/users/Cizor/following{/other_user}",
      "gists_url": "https://api.github.com/users/Cizor/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Cizor/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Cizor/subscriptions",
      "organizations_url": "https://api.github.com/users/Cizor/orgs",
      "repos_url": "https://api.github.com/users/Cizor/repos",
      "events_url": "https://api.github.com/users/Cizor/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Cizor/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "labels": [
      {
        "id": 9737891558,
        "node_id": "LA_kwDOQfMfks8AAAACRGxu5g",
        "url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/labels/type:test",
        "name": "type:test",
        "color": "3c874f",
        "default": false,
        "description": ""
      },
      {
        "id": 9782134341,
        "node_id": "LA_kwDOQfMfks8AAAACRw-GRQ",
        "url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/labels/scope:4-sbi",
        "name": "scope:4-sbi",
        "color": "5a2e28",
        "default": false,
        "description": ""
      },
      {
        "id": 9782139839,
        "node_id": "LA_kwDOQfMfks8AAAACRw-bvw",
        "url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/labels/chunk:8-sbi-controller-logic",
        "name": "chunk:8-sbi-controller-logic",
        "color": "de618e",
        "default": false,
        "description": ""
      },
      {
        "id": 9782141359,
        "node_id": "LA_kwDOQfMfks8AAAACRw-hrw",
        "url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/labels/chunk:10-sbi-unit-tests",
        "name": "chunk:10-sbi-unit-tests",
        "color": "95506b",
        "default": false,
        "description": ""
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": {
      "login": "Cizor",
      "id": 11782718,
      "node_id": "MDQ6VXNlcjExNzgyNzE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11782718?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Cizor",
      "html_url": "https://github.com/Cizor",
      "followers_url": "https://api.github.com/users/Cizor/followers",
      "following_url": "https://api.github.com/users/Cizor/following{/other_user}",
      "gists_url": "https://api.github.com/users/Cizor/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Cizor/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Cizor/subscriptions",
      "organizations_url": "https://api.github.com/users/Cizor/orgs",
      "repos_url": "https://api.github.com/users/Cizor/repos",
      "events_url": "https://api.github.com/users/Cizor/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Cizor/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "assignees": [
      {
        "login": "Cizor",
        "id": 11782718,
        "node_id": "MDQ6VXNlcjExNzgyNzE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/11782718?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Cizor",
        "html_url": "https://github.com/Cizor",
        "followers_url": "https://api.github.com/users/Cizor/followers",
        "following_url": "https://api.github.com/users/Cizor/following{/other_user}",
        "gists_url": "https://api.github.com/users/Cizor/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/Cizor/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Cizor/subscriptions",
        "organizations_url": "https://api.github.com/users/Cizor/orgs",
        "repos_url": "https://api.github.com/users/Cizor/repos",
        "events_url": "https://api.github.com/users/Cizor/events{/privacy}",
        "received_events_url": "https://api.github.com/users/Cizor/received_events",
        "type": "User",
        "user_view_type": "public",
        "site_admin": false
      }
    ],
    "milestone": {
      "url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/milestones/4",
      "html_url": "https://github.com/Cizor/spacetime-constellation-sim/milestone/4",
      "labels_url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/milestones/4/labels",
      "id": 14244293,
      "node_id": "MI_kwDOQfMfks4A2VnF",
      "number": 4,
      "title": "Scope 4 – Planning & Scheduling",
      "description": "",
      "creator": {
        "login": "Cizor",
        "id": 11782718,
        "node_id": "MDQ6VXNlcjExNzgyNzE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/11782718?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Cizor",
        "html_url": "https://github.com/Cizor",
        "followers_url": "https://api.github.com/users/Cizor/followers",
        "following_url": "https://api.github.com/users/Cizor/following{/other_user}",
        "gists_url": "https://api.github.com/users/Cizor/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/Cizor/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Cizor/subscriptions",
        "organizations_url": "https://api.github.com/users/Cizor/orgs",
        "repos_url": "https://api.github.com/users/Cizor/repos",
        "events_url": "https://api.github.com/users/Cizor/events{/privacy}",
        "received_events_url": "https://api.github.com/users/Cizor/received_events",
        "type": "User",
        "user_view_type": "public",
        "site_admin": false
      },
      "open_issues": 73,
      "closed_issues": 0,
      "state": "open",
      "created_at": "2025-11-29T09:54:27Z",
      "updated_at": "2025-12-10T17:09:37Z",
      "due_on": null,
      "closed_at": null
    },
    "comments": 0,
    "created_at": "2025-12-10T12:46:57Z",
    "updated_at": "2025-12-10T12:46:57Z",
    "closed_at": null,
    "author_association": "OWNER",
    "active_lock_reason": null,
    "sub_issues_summary": {
      "total": 0,
      "completed": 0,
      "percent_completed": 0
    },
    "parent_issue_url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/issues/170",
    "issue_dependencies_summary": {
      "blocked_by": 0,
      "total_blocked_by": 0,
      "blocking": 0,
      "total_blocking": 0
    },
    "body": "## Background\n\nChunk 8 introduced the controller-side **Scheduler** that:\n\n- Reads connectivity / potential links from `ScenarioState`.\n- Computes link in-view intervals `[T_on, T_off]`.\n- Schedules:\n  - `UpdateBeam` at (T_on - leadTime)\n  - `DeleteBeam` at T_off\n- Schedules static routes for single-hop paths.\n- Optionally performs minimal ServiceRequest-aware scheduling.\n\nNow, in **Chunk 10**, we must create **unit tests** validating this logic in complete isolation from:\n\n- CDPI server gRPC\n- Real agents\n- Real time controller\n\nThe Scheduler must be tested using:\n\n- **FakeEventScheduler** (from Chunk 3)\n- **FakeScenarioState** with deterministic link behavior\n- **FakeCDPI server handle** that records outgoing calls\n\nThe purpose is to confirm that scheduling logic is correct **before integration testing** (Chunk 11).\n\n---\n\n## Goals\n\nImplement a comprehensive scheduler_test.go suite that verifies:\n\n1. **Link-driven beam scheduling**:\n   - Given a link active interval `[T_on, T_off]`\n   - Scheduler emits:\n     - `UpdateBeam` at `T_on`\n     - `DeleteBeam` at `T_off`\n\n2. **Scheduler emits correct agent ID routing**:\n   - Actions must target the correct agent (node) based on link endpoint.\n\n3. **Static routing scheduling (SetRoute/DeleteRoute)**:\n   - For each in-view interval, scheduler issues:\n     - `SetRoute` at `T_on`\n     - `DeleteRoute` at `T_off`.\n\n4. **Scheduler produces no actions if link is never in view**.\n\n5. **Multiple links case**:\n   - Scheduler produces correct actions for each independent link.\n\n6. **ServiceRequest-aware scheduling (minimal)**:\n   - If a simple path exists:\n     - Scheduler emits at least one `UpdateBeam` + `SetRoute`.\n   - If no path exists:\n     - No actions should be emitted.\n\n---\n\n## Where to Look\n\nFile to create:\n\n```\ninternal/sbi/controller/scheduler_test.go\n```\n\nDependencies already available from earlier chunks:\n\n- `FakeEventScheduler`\n- `FakeScenarioState`\n- `FakeCDPIHandle` (you will create a minimal version)\n- `ScenarioState` helper mocks:\n  - `ListPotentialLinks()`\n  - `LinkInView(linkID) → intervals`\n  - `ListNodes()`\n  - `ListInterfaces(nodeID)`\n  - ServiceRequest store accessor\n\n---\n\n## Tasks\n\n### 1. Create test scaffolding\n\nImplement a small fake CDPI handle:\n\n```go\ntype FakeCDPI struct {\n    Creates []*ScheduledAction\n    Deletes []*ScheduledAction\n    Routes  []*ScheduledAction\n    mu sync.Mutex\n}\n\nfunc (f *FakeCDPI) SendCreateEntry(agentID string, action *ScheduledAction) error {\n    f.mu.Lock()\n    defer f.mu.Unlock()\n    f.Creates = append(f.Creates, action)\n    return nil\n}\n\nfunc (f *FakeCDPI) SendDeleteEntry(agentID string, entryID string) error {\n    // Add record for deletes\n}\n```\n\n### 2. Unit test: simple link interval → beam schedule\n\n```\nGiven:\n  Link L with in-view interval [T1=100s, T2=200s].\nExpect:\n  UpdateBeam at 100s\n  DeleteBeam at 200s\n```\n\nVerify:\n\n- Action.Type matches `ScheduledUpdateBeam` and `ScheduledDeleteBeam`\n- Action.When matches expected times\n- Correct agent ID chosen\n\n### 3. Unit test: static routes emitted\n\n```\nGiven:\n  Link between Node A and Node B\nExpect:\n  SetRoute at T_on\n  DeleteRoute at T_off\n```\n\nVerify correct per-node SetRoute actions.\n\n### 4. Unit test: no intervals → no actions\n\nFakeScenarioState returns no in-view intervals.\n\nScheduler must emit nothing.\n\n### 5. Unit test: multiple-link scheduling\n\nUse two links:\n\n- L1: [T1, T2]\n- L2: [T3, T4]\n\nEnsure scheduler emits four beam events and four route events exactly.\n\n### 6. Unit test: minimal ServiceRequest scheduling\n\n```\nGiven:\n  A ServiceRequest from A → C.\n  FakeScenarioState returns a simple path A → B → C.\nExpect:\n  Scheduler emits:\n    - UpdateBeam on first hop\n    - SetRoute entries for at least the first hop\n```\n\nIf no path exists:\n\n- Verify scheduler emits nothing.\n\n---\n\n## Acceptance Criteria\n\n- Fully implemented `scheduler_test.go`.\n- Tests cover:\n  - Beam scheduling\n  - Route scheduling\n  - No-op behavior when appropriate\n  - Multi-link case\n  - Minimal SR-aware scheduling\n- All tests pass via `go test ./...`.\n- Test helper fakes are small, deterministic, and easy to maintain.\n- No external dependencies (no gRPC, no real agents).\n- Code remains readable and consistent with Chunk 10 testing architecture.\n\n",
    "closed_by": null,
    "reactions": {
      "url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/issues/172/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/issues/172/timeline",
    "performed_via_github_app": null,
    "state_reason": null
  },
  {
    "url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/issues/173",
    "repository_url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim",
    "labels_url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/issues/173/labels{/name}",
    "comments_url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/issues/173/comments",
    "events_url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/issues/173/events",
    "html_url": "https://github.com/Cizor/spacetime-constellation-sim/issues/173",
    "id": 3715128847,
    "node_id": "I_kwDOQfMfks7dcF4P",
    "number": 173,
    "title": "[Scope 4][Chunk 10] Add unit tests for ScenarioState beam and route helpers",
    "user": {
      "login": "Cizor",
      "id": 11782718,
      "node_id": "MDQ6VXNlcjExNzgyNzE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11782718?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Cizor",
      "html_url": "https://github.com/Cizor",
      "followers_url": "https://api.github.com/users/Cizor/followers",
      "following_url": "https://api.github.com/users/Cizor/following{/other_user}",
      "gists_url": "https://api.github.com/users/Cizor/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Cizor/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Cizor/subscriptions",
      "organizations_url": "https://api.github.com/users/Cizor/orgs",
      "repos_url": "https://api.github.com/users/Cizor/repos",
      "events_url": "https://api.github.com/users/Cizor/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Cizor/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "labels": [
      {
        "id": 9737775966,
        "node_id": "LA_kwDOQfMfks8AAAACRGqrXg",
        "url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/labels/enhancement",
        "name": "enhancement",
        "color": "a2eeef",
        "default": true,
        "description": "New feature or request"
      },
      {
        "id": 9737888292,
        "node_id": "LA_kwDOQfMfks8AAAACRGxiJA",
        "url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/labels/scope:1-core",
        "name": "scope:1-core",
        "color": "5a92c6",
        "default": false,
        "description": ""
      },
      {
        "id": 9737888950,
        "node_id": "LA_kwDOQfMfks8AAAACRGxktg",
        "url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/labels/scope:2-connectivity",
        "name": "scope:2-connectivity",
        "color": "eabb19",
        "default": false,
        "description": ""
      },
      {
        "id": 9737891558,
        "node_id": "LA_kwDOQfMfks8AAAACRGxu5g",
        "url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/labels/type:test",
        "name": "type:test",
        "color": "3c874f",
        "default": false,
        "description": ""
      },
      {
        "id": 9782134341,
        "node_id": "LA_kwDOQfMfks8AAAACRw-GRQ",
        "url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/labels/scope:4-sbi",
        "name": "scope:4-sbi",
        "color": "5a2e28",
        "default": false,
        "description": ""
      },
      {
        "id": 9782141359,
        "node_id": "LA_kwDOQfMfks8AAAACRw-hrw",
        "url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/labels/chunk:10-sbi-unit-tests",
        "name": "chunk:10-sbi-unit-tests",
        "color": "95506b",
        "default": false,
        "description": ""
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": {
      "login": "Cizor",
      "id": 11782718,
      "node_id": "MDQ6VXNlcjExNzgyNzE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11782718?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Cizor",
      "html_url": "https://github.com/Cizor",
      "followers_url": "https://api.github.com/users/Cizor/followers",
      "following_url": "https://api.github.com/users/Cizor/following{/other_user}",
      "gists_url": "https://api.github.com/users/Cizor/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Cizor/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Cizor/subscriptions",
      "organizations_url": "https://api.github.com/users/Cizor/orgs",
      "repos_url": "https://api.github.com/users/Cizor/repos",
      "events_url": "https://api.github.com/users/Cizor/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Cizor/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "assignees": [
      {
        "login": "Cizor",
        "id": 11782718,
        "node_id": "MDQ6VXNlcjExNzgyNzE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/11782718?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Cizor",
        "html_url": "https://github.com/Cizor",
        "followers_url": "https://api.github.com/users/Cizor/followers",
        "following_url": "https://api.github.com/users/Cizor/following{/other_user}",
        "gists_url": "https://api.github.com/users/Cizor/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/Cizor/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Cizor/subscriptions",
        "organizations_url": "https://api.github.com/users/Cizor/orgs",
        "repos_url": "https://api.github.com/users/Cizor/repos",
        "events_url": "https://api.github.com/users/Cizor/events{/privacy}",
        "received_events_url": "https://api.github.com/users/Cizor/received_events",
        "type": "User",
        "user_view_type": "public",
        "site_admin": false
      }
    ],
    "milestone": {
      "url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/milestones/4",
      "html_url": "https://github.com/Cizor/spacetime-constellation-sim/milestone/4",
      "labels_url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/milestones/4/labels",
      "id": 14244293,
      "node_id": "MI_kwDOQfMfks4A2VnF",
      "number": 4,
      "title": "Scope 4 – Planning & Scheduling",
      "description": "",
      "creator": {
        "login": "Cizor",
        "id": 11782718,
        "node_id": "MDQ6VXNlcjExNzgyNzE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/11782718?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Cizor",
        "html_url": "https://github.com/Cizor",
        "followers_url": "https://api.github.com/users/Cizor/followers",
        "following_url": "https://api.github.com/users/Cizor/following{/other_user}",
        "gists_url": "https://api.github.com/users/Cizor/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/Cizor/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Cizor/subscriptions",
        "organizations_url": "https://api.github.com/users/Cizor/orgs",
        "repos_url": "https://api.github.com/users/Cizor/repos",
        "events_url": "https://api.github.com/users/Cizor/events{/privacy}",
        "received_events_url": "https://api.github.com/users/Cizor/received_events",
        "type": "User",
        "user_view_type": "public",
        "site_admin": false
      },
      "open_issues": 73,
      "closed_issues": 0,
      "state": "open",
      "created_at": "2025-11-29T09:54:27Z",
      "updated_at": "2025-12-10T17:09:37Z",
      "due_on": null,
      "closed_at": null
    },
    "comments": 0,
    "created_at": "2025-12-10T13:05:39Z",
    "updated_at": "2025-12-10T13:05:40Z",
    "closed_at": null,
    "author_association": "OWNER",
    "active_lock_reason": null,
    "sub_issues_summary": {
      "total": 0,
      "completed": 0,
      "percent_completed": 0
    },
    "parent_issue_url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/issues/170",
    "issue_dependencies_summary": {
      "blocked_by": 0,
      "total_blocked_by": 0,
      "blocking": 0,
      "total_blocking": 0
    },
    "body": "## Background\n\nIn earlier Scope 4 chunks you:\n\n- Extended the domain model and `ScenarioState` to support:\n  - Beam / link activation and deactivation via helpers like:\n    - `ApplyBeamUpdate(nodeID string, spec BeamSpec) error`\n    - `ApplyBeamDelete(nodeID, interfaceID, targetID string) error`\n  - Static routing via helpers:\n    - `InstallRoute(nodeID string, route RouteEntry) error`\n    - `RemoveRoute(nodeID, destCIDR string) error`\n- Wired these helpers into:\n  - The **Agent** execution path (from scheduled actions in Chunk 4).\n  - The **Scheduler** (Chunk 8) which emits `UpdateBeam`, `DeleteBeam`, `SetRoute`, and `DeleteRoute` actions based on connectivity and ServiceRequests.\n\nSo far, most of the testing has focused on:\n\n- Agent behaviour under scheduled actions.\n- Scheduler behaviour in terms of which actions it decides to send.\n- Telemetry paths consuming link/interface state.\n\nWhat is still missing is a **tight, focused unit test suite on the core KB / `ScenarioState` helpers themselves** to ensure:\n\n- Beam and route operations are **idempotent**.\n- Invalid inputs are rejected cleanly.\n- State remains internally consistent for links, interfaces, and route tables.\n- Future refactors in core / connectivity cannot silently break SBI-facing behaviour.\n\nThis issue adds those **ScenarioState-level unit tests** so you can debug logic at the core layer (without involving gRPC, agents, or the scheduler) and catch regressions early.\n\n## Goal\n\nProvide a dedicated unit test suite for the `ScenarioState` beam and routing helpers that:\n\n- Verifies correct behaviour for:\n  - Beam activation/deactivation.\n  - Route install/remove.\n- Asserts correct error handling for bad inputs.\n- Exercises basic idempotency semantics.\n- Optionally covers concurrency-safety patterns (where feasible without overcomplicating the test).\n\nThe tests should be small, deterministic, and runnable via `go test ./...` with no external services.\n\n## Where to look\n\nCore state and connectivity:\n\n- `internal/sim/state` or equivalent package where `ScenarioState` lives:\n  - Types representing:\n    - Nodes, interfaces, and links (including link IDs and active vs potential state).\n    - Route table entries (`RouteEntry`) on `NetworkNode`.\n  - Beam and routing helpers introduced in Scope 4:\n    - `ApplyBeamUpdate(...)`\n    - `ApplyBeamDelete(...)`\n    - `InstallRoute(...)`\n    - `RemoveRoute(...)`\n- Any existing tests under:\n  - `internal/sim/state/..._test.go`\n  - `core/..._test.go`\n  - Use as a pattern for test setup and assertions.\n\nSearch terms:\n\n- `ApplyBeamUpdate`\n- `ApplyBeamDelete`\n- `InstallRoute`\n- `RemoveRoute`\n- `RouteEntry`\n- `Active` / `Status` on links\n- `RoutingTable` or similar fields on `NetworkNode`\n\n## Tasks\n\n### 1. Create a dedicated test file\n\n- Add a new test file alongside the `ScenarioState` implementation, for example:\n  - `internal/sim/state/scheduling_helpers_test.go`\n  - Or similar name consistent with your existing test naming.\n- Import the minimum set of packages needed:\n  - Core model types (`NetworkNode`, `RouteEntry`, link types).\n  - `ScenarioState` constructor(s).\n  - Any internal helper constructors you already use in other tests.\n\nDesign notes:\n\n- Keep these tests focused on **state transitions** and **returned errors**.\n- Avoid involving gRPC, agents, or schedulers; those are covered in other Chunk 10 and 11 tests.\n\n### 2. Test beam activation / deactivation helpers\n\nAdd tests that cover:\n\n1. **Happy-path beam activation:**\n\n   - Arrange:\n     - Create a `ScenarioState` with:\n       - A node `node-1` with interface `if-1`.\n       - A potential link between `node-1/if-1` and some target (another node, or a generic link endpoint) with:\n         - `Status = Potential` (or `Active = false` depending on your model).\n     - Construct a minimal `BeamSpec` that should activate this link when passed to `ApplyBeamUpdate`.\n   - Act:\n     - Call `ApplyBeamUpdate(\"node-1\", spec)`.\n   - Assert:\n     - No error is returned.\n     - The corresponding link in `ScenarioState` is now marked as active:\n       - For example, `link.Status == Active` or `link.Active == true`.\n     - No unrelated links are modified.\n\n2. **Idempotent beam activation:**\n\n   - Call `ApplyBeamUpdate` twice with the same inputs.\n   - Assert:\n     - The second call does not error (or returns a specific “already active” error if you defined one).\n     - Link remains active and state is consistent (no duplicate entries or weird side effects).\n\n3. **Beam deactivation:**\n\n   - Arrange:\n     - Start from a state where the link is already active.\n   - Act:\n     - Call `ApplyBeamDelete(\"node-1\", \"if-1\", targetID)`.\n   - Assert:\n     - No error is returned.\n     - The link is now marked inactive / potential again.\n     - Idempotency: a second `ApplyBeamDelete` should not corrupt state (either no-op or a clean, documented error).\n\n4. **Invalid beam operations:**\n\n   - `ApplyBeamUpdate`:\n     - Non-existent node ID.\n     - Node exists but interface ID unknown.\n   - `ApplyBeamDelete`:\n     - Non-existent link / target combination.\n   - Assert:\n     - Proper error is returned (`ErrUnknownNode`, `ErrUnknownInterface`, or `error != nil` with a meaningful message).\n     - No new links are created; existing state is unchanged.\n\n### 3. Test route install / remove helpers\n\nAdd tests that cover:\n\n1. **Happy-path route install:**\n\n   - Arrange:\n     - Create a node `node-A` with interface `if-A-B` that should be used to reach `node-B`.\n     - Ensure `RoutingTable` for `node-A` is initially empty.\n   - Act:\n     - Call `InstallRoute(\"node-A\", RouteEntry{DestinationCIDR: \"10.0.0.0/24\", NextHopNodeID: \"node-B\", OutInterfaceID: \"if-A-B\"})`.\n   - Assert:\n     - No error.\n     - Node `node-A` now has exactly one route in its routing table.\n     - Fields match the input route.\n\n2. **Idempotent or overwrite semantics:**\n\n   - Decide and test your intended semantics:\n     - Either:\n       - Second `InstallRoute` with the same `DestinationCIDR` overwrites existing entry.\n     - Or:\n       - Returns a documented error (e.g. “duplicate route”).\n   - Assert that behaviour is clear and consistent.\n\n3. **Route removal:**\n\n   - Arrange:\n     - Node `node-A` has at least one route for `DestinationCIDR = \"10.0.0.0/24\"`.\n   - Act:\n     - `RemoveRoute(\"node-A\", \"10.0.0.0/24\")`.\n   - Assert:\n     - No error.\n     - Route is no longer present in the routing table.\n     - Subsequent `RemoveRoute` for the same CIDR behaves as designed:\n       - No error but no-op, or\n       - Clean “not found” error.\n\n4. **Invalid route operations:**\n\n   - Install route with:\n     - Non-existent node ID.\n     - `OutInterfaceID` that does not belong to the node.\n   - Remove route with:\n     - Non-existent node ID.\n     - CIDR which has no route.\n   - Assert:\n     - Clear error is returned.\n     - No routes are partially added or removed.\n     - Other nodes’ routing tables remain untouched.\n\n### 4. Optional: basic concurrency-safety checks\n\nIf your `ScenarioState` and helpers are expected to be concurrency-safe:\n\n- Add a small test using `t.Parallel()` or `sync.WaitGroup` that:\n\n  - Spawns several goroutines calling `InstallRoute`/`RemoveRoute` on the same node with different CIDRs.\n  - Alternatively, activates/deactivates different beams concurrently.\n\n- Assert:\n\n  - `go test -race ./...` does not report data races.\n  - The final routing table / link state is consistent with last-writer-wins semantics (or whatever behaviour you document).\n\nDo not overcomplicate this; a minimal smoke test is enough to catch obvious locking mistakes.\n\n### 5. Keep tests small and self-contained\n\n- Avoid relying on the full orbital / RF models:\n  - If needed, construct minimal fake links and interfaces directly in the `ScenarioState`.\n- Prefer simple helpers / factory functions in the test file to create:\n  - A `ScenarioState` with:\n    - One or two nodes.\n    - A handful of interfaces and links.\n- Ensure each test case:\n  - Clearly sets up state.\n  - Performs exactly one operation (or a short sequence).\n  - Verifies the resulting state and returned error.\n\n## Acceptance criteria\n\n- New test file exists alongside `ScenarioState` implementation, e.g.:\n  - `internal/sim/state/scheduling_helpers_test.go` (or equivalent).\n- Beam helper tests:\n  - Verify `ApplyBeamUpdate`:\n    - Activates the correct link when given a valid `BeamSpec`.\n    - Is idempotent or consistently handles repeated calls.\n    - Returns meaningful errors for unknown node/interface or missing links.\n  - Verify `ApplyBeamDelete`:\n    - Deactivates the appropriate link.\n    - Is safe to call even when the link is already inactive or missing.\n    - Leaves unrelated links untouched.\n- Route helper tests:\n  - Verify `InstallRoute`:\n    - Inserts a new `RouteEntry` on the correct node.\n    - Correctly handles repeated installs for the same destination CIDR (overwrite or documented error).\n  - Verify `RemoveRoute`:\n    - Removes existing routes cleanly.\n    - Behaves safely for non-existent nodes or destinations (no state corruption).\n- Optional but desirable:\n  - At least one concurrency-oriented test that can be run under `go test -race` without race reports.\n- All new tests:\n  - Run via `go test ./...` with no flakes or external dependencies.\n  - Keep runtime small (milliseconds), suitable for CI.\n- Repository health:\n  - `go build ./...` passes with no changes required outside of tests.\n  - `go test ./...` passes, including these new ScenarioState beam/route helper tests.\n",
    "closed_by": null,
    "reactions": {
      "url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/issues/173/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/issues/173/timeline",
    "performed_via_github_app": null,
    "state_reason": null
  },
  {
    "url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/issues/175",
    "repository_url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim",
    "labels_url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/issues/175/labels{/name}",
    "comments_url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/issues/175/comments",
    "events_url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/issues/175/events",
    "html_url": "https://github.com/Cizor/spacetime-constellation-sim/issues/175",
    "id": 3715175639,
    "node_id": "I_kwDOQfMfks7dcRTX",
    "number": 175,
    "title": "[Scope 4][Chunk 10] Add TelemetryState & agent telemetry unit tests",
    "user": {
      "login": "Cizor",
      "id": 11782718,
      "node_id": "MDQ6VXNlcjExNzgyNzE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11782718?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Cizor",
      "html_url": "https://github.com/Cizor",
      "followers_url": "https://api.github.com/users/Cizor/followers",
      "following_url": "https://api.github.com/users/Cizor/following{/other_user}",
      "gists_url": "https://api.github.com/users/Cizor/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Cizor/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Cizor/subscriptions",
      "organizations_url": "https://api.github.com/users/Cizor/orgs",
      "repos_url": "https://api.github.com/users/Cizor/repos",
      "events_url": "https://api.github.com/users/Cizor/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Cizor/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "labels": [
      {
        "id": 9737891558,
        "node_id": "LA_kwDOQfMfks8AAAACRGxu5g",
        "url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/labels/type:test",
        "name": "type:test",
        "color": "3c874f",
        "default": false,
        "description": ""
      },
      {
        "id": 9782134341,
        "node_id": "LA_kwDOQfMfks8AAAACRw-GRQ",
        "url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/labels/scope:4-sbi",
        "name": "scope:4-sbi",
        "color": "5a2e28",
        "default": false,
        "description": ""
      },
      {
        "id": 9782141359,
        "node_id": "LA_kwDOQfMfks8AAAACRw-hrw",
        "url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/labels/chunk:10-sbi-unit-tests",
        "name": "chunk:10-sbi-unit-tests",
        "color": "95506b",
        "default": false,
        "description": ""
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": {
      "login": "Cizor",
      "id": 11782718,
      "node_id": "MDQ6VXNlcjExNzgyNzE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11782718?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Cizor",
      "html_url": "https://github.com/Cizor",
      "followers_url": "https://api.github.com/users/Cizor/followers",
      "following_url": "https://api.github.com/users/Cizor/following{/other_user}",
      "gists_url": "https://api.github.com/users/Cizor/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Cizor/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Cizor/subscriptions",
      "organizations_url": "https://api.github.com/users/Cizor/orgs",
      "repos_url": "https://api.github.com/users/Cizor/repos",
      "events_url": "https://api.github.com/users/Cizor/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Cizor/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "assignees": [
      {
        "login": "Cizor",
        "id": 11782718,
        "node_id": "MDQ6VXNlcjExNzgyNzE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/11782718?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Cizor",
        "html_url": "https://github.com/Cizor",
        "followers_url": "https://api.github.com/users/Cizor/followers",
        "following_url": "https://api.github.com/users/Cizor/following{/other_user}",
        "gists_url": "https://api.github.com/users/Cizor/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/Cizor/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Cizor/subscriptions",
        "organizations_url": "https://api.github.com/users/Cizor/orgs",
        "repos_url": "https://api.github.com/users/Cizor/repos",
        "events_url": "https://api.github.com/users/Cizor/events{/privacy}",
        "received_events_url": "https://api.github.com/users/Cizor/received_events",
        "type": "User",
        "user_view_type": "public",
        "site_admin": false
      }
    ],
    "milestone": {
      "url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/milestones/4",
      "html_url": "https://github.com/Cizor/spacetime-constellation-sim/milestone/4",
      "labels_url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/milestones/4/labels",
      "id": 14244293,
      "node_id": "MI_kwDOQfMfks4A2VnF",
      "number": 4,
      "title": "Scope 4 – Planning & Scheduling",
      "description": "",
      "creator": {
        "login": "Cizor",
        "id": 11782718,
        "node_id": "MDQ6VXNlcjExNzgyNzE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/11782718?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Cizor",
        "html_url": "https://github.com/Cizor",
        "followers_url": "https://api.github.com/users/Cizor/followers",
        "following_url": "https://api.github.com/users/Cizor/following{/other_user}",
        "gists_url": "https://api.github.com/users/Cizor/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/Cizor/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Cizor/subscriptions",
        "organizations_url": "https://api.github.com/users/Cizor/orgs",
        "repos_url": "https://api.github.com/users/Cizor/repos",
        "events_url": "https://api.github.com/users/Cizor/events{/privacy}",
        "received_events_url": "https://api.github.com/users/Cizor/received_events",
        "type": "User",
        "user_view_type": "public",
        "site_admin": false
      },
      "open_issues": 73,
      "closed_issues": 0,
      "state": "open",
      "created_at": "2025-11-29T09:54:27Z",
      "updated_at": "2025-12-10T17:09:37Z",
      "due_on": null,
      "closed_at": null
    },
    "comments": 0,
    "created_at": "2025-12-10T13:18:10Z",
    "updated_at": "2025-12-10T13:18:10Z",
    "closed_at": null,
    "author_association": "OWNER",
    "active_lock_reason": null,
    "sub_issues_summary": {
      "total": 0,
      "completed": 0,
      "percent_completed": 0
    },
    "parent_issue_url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/issues/170",
    "issue_dependencies_summary": {
      "blocked_by": 0,
      "total_blocked_by": 0,
      "blocking": 0,
      "total_blocking": 0
    },
    "body": "## Background\n\nBy this point in **Scope 4** you have:\n\n- A controller-side telemetry model and store:\n  - `InterfaceMetrics` struct (node/interface IDs, `Up`, `BytesTx`, optional RF fields).\n  - `TelemetryState` with concurrency-safe `UpdateMetrics` / `GetMetrics`.\n- A server-side `TelemetryServer` implementing:\n  - `TelemetryService.ExportMetrics`, which:\n    - Accepts `ExportMetricsRequest` from agents.\n    - Translates proto metrics → `InterfaceMetrics`.\n    - Calls `TelemetryState.UpdateMetrics(...)`.\n- An agent-side telemetry loop:\n  - `Agent.startTelemetryLoop` scheduled via `EventScheduler`.\n  - `telemetryTick()` that:\n    - Uses sim time (`Scheduler.Now()`).\n    - Derives per-interface `Up`/bandwidth via `deriveInterfaceState`.\n    - Maintains per-interface `BytesTx` counters.\n    - Builds `ExportMetricsRequest` with `InterfaceMetrics` protos.\n    - Calls `TelemetryServiceClient.ExportMetrics`.\n\nWhat’s missing is a focused set of **unit tests** that:\n\n- Validate `TelemetryState` behaviour in isolation.\n- Validate the `TelemetryServer.ExportMetrics` → `TelemetryState` integration.\n- Validate the **agent telemetry loop**:\n  - Correct sim-time `delta` handling.\n  - Correct `BytesTx` accumulation when interfaces are up.\n  - No accumulation when interfaces are down.\n  - Safe behaviour when telemetry is disabled or there are no interfaces.\n\nThis issue covers the **telemetry-focused unit tests** for Chunk 10.\n\n## Goal\n\n- Add unit tests that exercise:\n\n  - `TelemetryState`:\n    - Insert + update metrics.\n    - Retrieval semantics (copy vs pointer, nil when missing).\n  - `TelemetryServer.ExportMetrics`:\n    - Maps proto metrics into `TelemetryState` correctly.\n    - Handles multiple interfaces in one request.\n  - Agent telemetry loop:\n    - `startTelemetryLoop()` schedules ticks only when telemetry is enabled.\n    - `telemetryTick()`:\n      - Uses sim time (`Scheduler.Now()`) to compute `delta`.\n      - Calls `buildInterfaceMetrics(deltaSec)` and `sendExportMetrics`.\n    - `buildInterfaceMetrics(...)`:\n      - Enumerates interfaces for `Agent.NodeID` from `ScenarioState`.\n      - Maintains and increments `BytesTx` based on `bandwidthBps * delta / 8`.\n      - Respects `Up` flag from `deriveInterfaceState`.\n\n- Tests must be **deterministic** and use a **fake scheduler**, fake telemetry client, and fake scenario state.\n\n## Where to look\n\n- Telemetry data model and state (controller side):\n\n  - Likely under something like:\n    - `internal/sim/telemetry`\n    - or `internal/sim/state/telemetry.go`\n    - or `sim/state/telemetry.go`\n\n  - Types to look for:\n\n        type InterfaceMetrics struct {\n            NodeID      string\n            InterfaceID string\n            Up          bool\n            BytesTx     uint64\n            // optional RF fields...\n        }\n\n        type TelemetryState struct {\n            mu   sync.RWMutex\n            byIf map[string]*InterfaceMetrics // key \"nodeID/interfaceID\"\n        }\n\n  - Methods:\n\n        func NewTelemetryState() *TelemetryState\n        func (t *TelemetryState) UpdateMetrics(m *InterfaceMetrics)\n        func (t *TelemetryState) GetMetrics(nodeID, ifaceID string) *InterfaceMetrics\n\n- Telemetry server:\n\n  - In an SBI-related package, e.g.:\n\n        internal/sbi/telemetry/server.go\n\n  - Type:\n\n        type TelemetryServer struct {\n            telemetry.UnimplementedTelemetryServiceServer\n            Telemetry *TelemetryState\n            // optional logger, etc.\n        }\n\n  - Method:\n\n        func (s *TelemetryServer) ExportMetrics(\n            ctx context.Context,\n            req *telemetry.ExportMetricsRequest,\n        ) (*telemetry.ExportMetricsResponse, error)\n\n- Agent telemetry loop:\n\n  - In `internal/sbi/agent/agent.go` (or similar):\n\n        type Agent struct {\n            AgentID          string\n            NodeID           string\n            State            *simstate.ScenarioState\n            Scheduler        sbi.EventScheduler\n            TelemetryClient  telemetry.TelemetryServiceClient\n            TelemetryInterval time.Duration\n\n            telemetryMu sync.Mutex\n            bytesTx     map[string]uint64\n            lastTick    time.Time\n\n            // other fields: Stream, logger, etc.\n        }\n\n  - Methods:\n\n        func (a *Agent) startTelemetryLoop()\n        func (a *Agent) telemetryTick()\n        func (a *Agent) buildInterfaceMetrics(deltaSec float64) []*telemetry.InterfaceMetrics\n        func (a *Agent) deriveInterfaceState(nodeID, ifaceID string) (up bool, bandwidthBps float64)\n        func (a *Agent) sendExportMetrics(metrics []*telemetry.InterfaceMetrics)\n\n- Event scheduler (fake + real):\n\n  - Interface:\n\n        type EventScheduler interface {\n            Schedule(at time.Time, f func()) (id string)\n            Cancel(id string)\n            Now() time.Time\n        }\n\n  - Fake implementation for tests (may already exist from previous chunks, e.g. `FakeEventScheduler`).\n\n## Tasks\n\n### 1. Add tests for TelemetryState\n\nCreate a test file, e.g.:\n\n- `sim/state/telemetry_state_test.go`\n- or `internal/sim/telemetry/telemetry_state_test.go`\n\nTest cases:\n\n1. Insert and retrieve metrics:\n\n   - Given a fresh `TelemetryState`:\n     - Call `UpdateMetrics(&InterfaceMetrics{NodeID: \"node-1\", InterfaceID: \"if-1\", Up: true, BytesTx: 123})`.\n     - Call `GetMetrics(\"node-1\", \"if-1\")`.\n     - Assert:\n       - Result is non-nil.\n       - `NodeID == \"node-1\"`, `InterfaceID == \"if-1\"`.\n       - `Up == true`.\n       - `BytesTx == 123`.\n\n2. Update overwrites existing metrics:\n\n   - Insert initial metrics with `BytesTx = 100`.\n   - Call `UpdateMetrics` with same `NodeID`/`InterfaceID` but `BytesTx = 200`, `Up = false`.\n   - `GetMetrics` again.\n   - Assert:\n     - `BytesTx == 200`, `Up == false`.\n     - No stale values left over from the first update.\n\n3. Missing metrics returns nil:\n\n   - `GetMetrics(\"unknown-node\", \"unknown-if\")` returns `nil`.\n\n4. Optional: copy semantics vs pointer semantics:\n\n   - Depending on implementation, verify either:\n     - Mutations to the returned struct do not affect stored state (if you chose to return a copy).\n     - Or clearly document and test that the pointer is shared.\n\n### 2. Add tests for TelemetryServer.ExportMetrics\n\nCreate a test file, e.g.:\n\n- `internal/sbi/telemetry/server_test.go`\n\nTest cases:\n\n1. Single interface metrics:\n\n   - Setup:\n     - `telState := NewTelemetryState()`.\n     - `srv := &TelemetryServer{Telemetry: telState}`.\n   - Build a `telemetry.ExportMetricsRequest` with one `InterfaceMetrics` proto entry:\n     - `node_id = \"node-1\"`, `interface_id = \"if-1\"`, `up = true`, `bytes_tx = 1000`.\n   - Call `srv.ExportMetrics(context.Background(), req)`.\n   - Assert:\n     - No error.\n     - `TelemetryState.GetMetrics(\"node-1\", \"if-1\")` is non-nil and matches the proto fields.\n\n2. Multiple interfaces in one request:\n\n   - Build a request with two metrics:\n     - `(\"node-1\", \"if-1\")`, `(\"node-1\", \"if-2\")`.\n   - Call `ExportMetrics`.\n   - Assert both entries are present in `TelemetryState`.\n\n3. Overwriting existing metrics:\n\n   - Pre-populate `TelemetryState` with one entry.\n   - Send an `ExportMetricsRequest` with the same `node_id` / `interface_id` but different `bytes_tx` / `up` values.\n   - Assert state is updated accordingly.\n\n4. Empty request behaviour:\n\n   - Send an `ExportMetricsRequest` with no metrics.\n   - Assert:\n     - No panic or error (likely OK response).\n     - Existing metrics in `TelemetryState` are unchanged.\n\n### 3. Add tests for Agent telemetry loop\n\nCreate a test file, e.g.:\n\n- `internal/sbi/agent/agent_telemetry_test.go`\n\n#### 3.1 Test scaffolding: fakes\n\nAdd simple fakes / test doubles:\n\n- `FakeEventScheduler`:\n  - Fields:\n    - `now time.Time`\n    - `events []scheduledEvent` where `scheduledEvent` holds `(at time.Time, f func())`.\n  - Methods:\n    - `Now() time.Time` returns `now`.\n    - `Schedule(at time.Time, f func())` appends to `events` and returns an `id`.\n    - `Cancel(id string)` can be a no-op for these tests unless you need it.\n    - Helper `RunAll()` or `AdvanceTo(t time.Time)` for tests to execute scheduled callbacks.\n\n- `FakeTelemetryClient` implementing `TelemetryServiceClient`:\n  - Fields:\n    - `calls []*telemetry.ExportMetricsRequest`\n  - Method:\n    - `ExportMetrics(ctx context.Context, in *telemetry.ExportMetricsRequest, opts ...grpc.CallOption) (*telemetry.ExportMetricsResponse, error)`:\n      - Append `in` to `calls`.\n      - Return an empty `ExportMetricsResponse` and `nil` error.\n\n- `FakeScenarioState` (minimal interface you need for telemetry):\n  - Provide:\n    - `GetInterfacesForNode(nodeID string) []Interface` (or equivalent).\n  - Each `Interface` should have at least:\n    - `ID string`\n  - You can define a small local `type Interface struct { ID string }` in the test if needed.\n\n- Provide a test-friendly implementation of `deriveInterfaceState`:\n  - Either:\n    - Use the real method and make `FakeScenarioState` provide enough link data.\n    - Or:\n      - For tests, embed behaviour in `FakeScenarioState` (e.g., map from `ifaceID` → `(up, bandwidthBps)`).\n\n#### 3.2 Telemetry loop schedules and sends metrics\n\nTest:\n\n- Setup:\n  - Fake scheduler with `Now()` starting at `T0` (e.g., `time.Unix(0, 0)`).\n  - Fake scenario state with:\n    - `NodeID = \"node-1\"` has 1 interface `\"if-1\"`.\n    - `deriveInterfaceState(\"node-1\", \"if-1\")` returns `up = true`, `bandwidthBps = 8000` (1 kB/s).\n  - Fake telemetry client that records requests.\n  - Agent:\n    - `NodeID = \"node-1\"`.\n    - `Scheduler = fakeScheduler`.\n    - `State = fakeScenarioState`.\n    - `TelemetryClient = fakeTelemetryClient`.\n    - `TelemetryInterval = 1 * time.Second`.\n\n- Call `agent.startTelemetryLoop()`.\n\n- In test, move time forward:\n  - Set `fakeScheduler.now = T0.Add(1 * time.Second)`.\n  - Execute scheduled callback (e.g. `fakeScheduler.RunAll()` or manually execute the recorded func).\n\n- Assertions:\n  - Exactly one `ExportMetrics` call was recorded.\n  - The request contains one `InterfaceMetrics`:\n    - `NodeId == \"node-1\"`.\n    - `InterfaceId == \"if-1\"`.\n    - `Up == true`.\n    - `BytesTx` is approximately `8000 * 1 / 8 = 1000` (allowing for integer rounding).\n\n#### 3.3 Multiple ticks accumulate bytes\n\nTest:\n\n- Same setup as above.\n- Execute two telemetry ticks:\n  - Advance `now` to `T0 + 1s`, run callbacks.\n  - Advance `now` to `T0 + 2s`, run callbacks again.\n- Assertions:\n  - At least two `ExportMetrics` calls recorded.\n  - For `\"if-1\"`:\n    - `BytesTx` in the **second** call is roughly twice the first `BytesTx`.\n\n#### 3.4 Interface down → bytes not increasing\n\nTest:\n\n- Fake state / `deriveInterfaceState` returns `up = false`, `bandwidthBps = 8000`.\n- Run multiple ticks as above.\n- Assertions:\n  - For `\"if-1\"`, `BytesTx` remains `0` (or unchanged) across calls.\n\n#### 3.5 Telemetry disabled when client or scheduler missing\n\nTwo small tests:\n\n1. `TelemetryClient = nil`:\n\n   - Agent has valid scheduler/state but no telemetry client.\n   - Call `startTelemetryLoop()`.\n   - Assert:\n     - Either:\n       - No events scheduled in the fake scheduler, or\n       - `telemetryTick()` is a no-op and never calls the client.\n\n2. `Scheduler = nil`:\n\n   - Agent has valid client but `Scheduler = nil`.\n   - `startTelemetryLoop()` should safely return without panic.\n\n#### 3.6 Safe behaviour for empty node / no interfaces\n\nTest:\n\n- Agent has valid client + scheduler, but fake state returns `0` interfaces for `NodeID`.\n- Run a telemetry tick.\n- Assertions:\n  - Either:\n    - No `ExportMetrics` calls.\n    - Or calls with an empty `InterfaceMetrics` list (decide and enforce).\n  - No panic or race.\n\n## Acceptance criteria\n\n- **TelemetryState tests**:\n  - Cover:\n    - Insert + retrieve metrics for a known `(NodeID, InterfaceID)`.\n    - Overwriting existing metrics updates fields correctly.\n    - Retrieving unknown metrics returns `nil`.\n  - Run as part of `go test ./...` and pass.\n\n- **TelemetryServer.ExportMetrics tests**:\n  - Verify:\n    - Single and multiple metrics are stored correctly in `TelemetryState`.\n    - Calling `ExportMetrics` with no metrics is safe and does not corrupt state.\n  - All tests pass.\n\n- **Agent telemetry loop tests**:\n  - Use a fake scheduler, fake telemetry client, and fake scenario state.\n  - Verify:\n    - `startTelemetryLoop()` schedules the first tick only when telemetry is correctly configured.\n    - `telemetryTick()`:\n      - Computes `delta` based on sim time (`Scheduler.Now()`).\n      - Calls `buildInterfaceMetrics(delta)` and `sendExportMetrics` when interfaces exist.\n    - `BytesTx` increases as expected over multiple ticks when `Up == true` and `bandwidthBps > 0`.\n    - `BytesTx` does not increase when interfaces are down.\n    - No panics when telemetry is disabled, scheduler is nil, or there are no interfaces.\n\n- **Repository health**:\n  - `go test ./...` passes with the new telemetry-related tests.\n  - Tests are deterministic (no reliance on real time / wall-clock).\n",
    "closed_by": null,
    "reactions": {
      "url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/issues/175/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/issues/175/timeline",
    "performed_via_github_app": null,
    "state_reason": null
  },
  {
    "url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/issues/197",
    "repository_url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim",
    "labels_url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/issues/197/labels{/name}",
    "comments_url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/issues/197/comments",
    "events_url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/issues/197/events",
    "html_url": "https://github.com/Cizor/spacetime-constellation-sim/issues/197",
    "id": 3716033756,
    "node_id": "I_kwDOQfMfks7dfizc",
    "number": 197,
    "title": "[Scope 4][Chunk 10] Add agent schedule execution unit tests",
    "user": {
      "login": "Cizor",
      "id": 11782718,
      "node_id": "MDQ6VXNlcjExNzgyNzE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11782718?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Cizor",
      "html_url": "https://github.com/Cizor",
      "followers_url": "https://api.github.com/users/Cizor/followers",
      "following_url": "https://api.github.com/users/Cizor/following{/other_user}",
      "gists_url": "https://api.github.com/users/Cizor/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Cizor/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Cizor/subscriptions",
      "organizations_url": "https://api.github.com/users/Cizor/orgs",
      "repos_url": "https://api.github.com/users/Cizor/repos",
      "events_url": "https://api.github.com/users/Cizor/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Cizor/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "labels": [
      {
        "id": 9737891558,
        "node_id": "LA_kwDOQfMfks8AAAACRGxu5g",
        "url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/labels/type:test",
        "name": "type:test",
        "color": "3c874f",
        "default": false,
        "description": ""
      },
      {
        "id": 9782134341,
        "node_id": "LA_kwDOQfMfks8AAAACRw-GRQ",
        "url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/labels/scope:4-sbi",
        "name": "scope:4-sbi",
        "color": "5a2e28",
        "default": false,
        "description": ""
      },
      {
        "id": 9782141359,
        "node_id": "LA_kwDOQfMfks8AAAACRw-hrw",
        "url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/labels/chunk:10-sbi-unit-tests",
        "name": "chunk:10-sbi-unit-tests",
        "color": "95506b",
        "default": false,
        "description": ""
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": {
      "login": "Cizor",
      "id": 11782718,
      "node_id": "MDQ6VXNlcjExNzgyNzE4",
      "avatar_url": "https://avatars.githubusercontent.com/u/11782718?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/Cizor",
      "html_url": "https://github.com/Cizor",
      "followers_url": "https://api.github.com/users/Cizor/followers",
      "following_url": "https://api.github.com/users/Cizor/following{/other_user}",
      "gists_url": "https://api.github.com/users/Cizor/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/Cizor/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/Cizor/subscriptions",
      "organizations_url": "https://api.github.com/users/Cizor/orgs",
      "repos_url": "https://api.github.com/users/Cizor/repos",
      "events_url": "https://api.github.com/users/Cizor/events{/privacy}",
      "received_events_url": "https://api.github.com/users/Cizor/received_events",
      "type": "User",
      "user_view_type": "public",
      "site_admin": false
    },
    "assignees": [
      {
        "login": "Cizor",
        "id": 11782718,
        "node_id": "MDQ6VXNlcjExNzgyNzE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/11782718?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Cizor",
        "html_url": "https://github.com/Cizor",
        "followers_url": "https://api.github.com/users/Cizor/followers",
        "following_url": "https://api.github.com/users/Cizor/following{/other_user}",
        "gists_url": "https://api.github.com/users/Cizor/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/Cizor/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Cizor/subscriptions",
        "organizations_url": "https://api.github.com/users/Cizor/orgs",
        "repos_url": "https://api.github.com/users/Cizor/repos",
        "events_url": "https://api.github.com/users/Cizor/events{/privacy}",
        "received_events_url": "https://api.github.com/users/Cizor/received_events",
        "type": "User",
        "user_view_type": "public",
        "site_admin": false
      }
    ],
    "milestone": {
      "url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/milestones/4",
      "html_url": "https://github.com/Cizor/spacetime-constellation-sim/milestone/4",
      "labels_url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/milestones/4/labels",
      "id": 14244293,
      "node_id": "MI_kwDOQfMfks4A2VnF",
      "number": 4,
      "title": "Scope 4 – Planning & Scheduling",
      "description": "",
      "creator": {
        "login": "Cizor",
        "id": 11782718,
        "node_id": "MDQ6VXNlcjExNzgyNzE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/11782718?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/Cizor",
        "html_url": "https://github.com/Cizor",
        "followers_url": "https://api.github.com/users/Cizor/followers",
        "following_url": "https://api.github.com/users/Cizor/following{/other_user}",
        "gists_url": "https://api.github.com/users/Cizor/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/Cizor/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/Cizor/subscriptions",
        "organizations_url": "https://api.github.com/users/Cizor/orgs",
        "repos_url": "https://api.github.com/users/Cizor/repos",
        "events_url": "https://api.github.com/users/Cizor/events{/privacy}",
        "received_events_url": "https://api.github.com/users/Cizor/received_events",
        "type": "User",
        "user_view_type": "public",
        "site_admin": false
      },
      "open_issues": 73,
      "closed_issues": 0,
      "state": "open",
      "created_at": "2025-11-29T09:54:27Z",
      "updated_at": "2025-12-10T17:09:37Z",
      "due_on": null,
      "closed_at": null
    },
    "comments": 0,
    "created_at": "2025-12-10T16:57:11Z",
    "updated_at": "2025-12-10T17:01:59Z",
    "closed_at": null,
    "author_association": "OWNER",
    "active_lock_reason": null,
    "sub_issues_summary": {
      "total": 0,
      "completed": 0,
      "percent_completed": 0
    },
    "parent_issue_url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/issues/170",
    "issue_dependencies_summary": {
      "blocked_by": 0,
      "total_blocked_by": 0,
      "blocking": 0,
      "total_blocking": 0
    },
    "body": "## Background\n\nChunk 10 requires unit tests for agent behavior. While scheduler and telemetry tests exist (#171, #172, #175), we need explicit tests for agent schedule execution - verifying that agents correctly receive, schedule, and execute actions.\n\n## Goal\n\nAdd comprehensive unit tests for agent schedule execution covering:\n- CreateEntry → scheduled execution → Response flow\n- DeleteEntry cancellation\n- FinalizeRequest cleanup\n\n## Tasks\n\n### 1. Set up test infrastructure\n\nIn `internal/sbi/agent/agent_test.go`:\n\n- Create `FakeEventScheduler` (or reuse from Chunk 3 tests)\n- Create `FakeScenarioState` that records method calls:\n  - `ApplyBeamUpdate` calls\n  - `ApplyBeamDelete` calls\n  - `InstallRoute` calls\n  - `RemoveRoute` calls\n- Create `FakeCDPIStream` that records `Response` messages sent\n\n### 2. Test CreateEntry → scheduled execution\n\nTest case:\n\n```go\nfunc TestAgent_CreateEntry_SchedulesAndExecutes(t *testing.T) {\n    // Setup: agent with fake scheduler, state, stream\n    // Action: simulate receiving CreateEntryRequest with:\n    //   - UpdateBeam at time T\n    //   - RequestID = \"req-123\"\n    // Verify:\n    //   - Action scheduled in EventScheduler\n    //   - Advance clock to T\n    //   - Assert ApplyBeamUpdate called with correct params\n    //   - Assert Response sent with matching request_id and OK status\n}\n```\n\nTest variations:\n- `ScheduledSetRoute` → `InstallRoute` called\n- `ScheduledDeleteRoute` → `RemoveRoute` called\n- `ScheduledDeleteBeam` → `ApplyBeamDelete` called\n\n### 3. Test DeleteEntry cancels scheduled event\n\nTest case:\n\n```go\nfunc TestAgent_DeleteEntry_CancelsScheduledAction(t *testing.T) {\n    // Setup: agent with scheduled action at time T\n    // Action: simulate DeleteEntryRequest for that EntryID\n    // Verify:\n    //   - Action removed from pending map\n    //   - EventScheduler.Cancel called\n    //   - Advance clock to T\n    //   - Assert NO beam/route helpers called\n}\n```\n\n### 4. Test FinalizeRequest cleanup\n\nTest case:\n\n```go\nfunc TestAgent_FinalizeRequest_DropsOldEntries(t *testing.T) {\n    // Setup: agent with two scheduled actions:\n    //   - Entry1 at T1 (before cutoff)\n    //   - Entry2 at T2 (after cutoff)\n    // Action: simulate FinalizeRequest with cutoff between T1 and T2\n    // Verify:\n    //   - Entry1 removed from pending\n    //   - Entry2 remains in pending\n    //   - Only Entry2 executes when clock reaches T2\n}\n```\n\n### 5. Test error handling\n\n- Invalid action type → appropriate error\n- Missing required fields → error handling\n- Token mismatch → log and ignore (per Chunk 7)\n\n## Acceptance Criteria\n\n- Unit tests exist for:\n  - CreateEntry → execution → Response flow\n  - DeleteEntry cancellation\n  - FinalizeRequest cleanup\n- All tests use fake dependencies (no real gRPC, no real time)\n- Tests are deterministic and fast\n- Coverage includes all ScheduledAction types (UpdateBeam, DeleteBeam, SetRoute, DeleteRoute)\n- `go test ./internal/sbi/agent/...` passes\n\n## Related Issues\n\n- Part of Chunk 10 epic (#170)\n- Depends on Chunk 4 agent implementation (#135-139)\n- Uses FakeEventScheduler from Chunk 3 (#134)",
    "closed_by": null,
    "reactions": {
      "url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/issues/197/reactions",
      "total_count": 0,
      "+1": 0,
      "-1": 0,
      "laugh": 0,
      "hooray": 0,
      "confused": 0,
      "heart": 0,
      "rocket": 0,
      "eyes": 0
    },
    "timeline_url": "https://api.github.com/repos/Cizor/spacetime-constellation-sim/issues/197/timeline",
    "performed_via_github_app": null,
    "state_reason": null
  }
]
